<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.13">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dan Hicks">
<meta name="dcterms.date" content="2013-09-04">

<title>How to Use Citations to Create Ignorance – Dan Hicks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-66ab7fd5e73b7f0a764e0d49b3e29ab1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-6bbb2ee3340c67b6da55fdc5589aeeb3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="How to Use Citations to Create Ignorance – Dan Hicks">
<meta property="og:description" content="Website description">
<meta property="og:site_name" content="Dan Hicks ">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Dan Hicks</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Teaching</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-teaching">    
        <li>
    <a class="dropdown-item" href="https://data-science-methods.github.io/">
 <span class="dropdown-text">Methods of Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://fairy-shrimp.netlify.app/">
 <span class="dropdown-text">Notes for Critical Reasoning</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0001-7945-4416"> 
<span class="menu-text"><i class="fa-brands fa-orcid" aria-label="orcid"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com/citations?user=XvkwYZsAAAAJ&amp;hl=en"> 
<span class="menu-text"><i class="ai  ai-google-scholar" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://dhicks.github.io/cv"> 
<span class="menu-text"><i class="ai  ai-cv" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dhicks/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:dhicks4@ucmerced.edu"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How to Use Citations to Create Ignorance</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">citation</div>
                <div class="quarto-category">citations</div>
                <div class="quarto-category">data</div>
                <div class="quarto-category">gm</div>
                <div class="quarto-category">gmof</div>
                <div class="quarto-category">maize</div>
                <div class="quarto-category">policy</div>
                <div class="quarto-category">scientist</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Dan Hicks </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 4, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>I spent most of Monday working on some “deep literature analysis” for my research on genetically modified organisms for food, or <strong>GMOf</strong>. This meant, in practice, that I spent about two hours looking up the citations for a single article. It was quite dull work, but the results were very interesting from the perspective of <strong>agnotology</strong>, an emerging area of science studies that deals with the production of ignorance. In this post, I’m going to give you some background on the “feed the world argument” and agnotology, then present my findings.</p>
<p>First, a few quick paragraphs of background. The “feed the world” argument is probably the most prominent argument used by supporters of GMOf. It’s shown up venues from <a href="http://www.nytimes.com/2011/08/19/opinion/genetically-engineered-food-for-all.html?src=me&amp;ref=general">The New York Times</a> to <a href="http://www.nature.com/nature/journal/v466/n7306/">Nature</a>, and off the top of my head I can think of <a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=246530">versions of it</a> that date back to 2000. The argument, in brief, is that (1) world population will increase significantly over the next few decades, so (2) food production should be significantly increased; and (3) GMOf will increase food production, hence (4) we should develop GMOf.</p>
<p><a href="http://link.springer.com/article/10.1007%2Fs11948-002-0003-8">Hugh Lacey</a> has pointed out that this argument is invalid: the fact that GMOf will increase food production doesn’t imply that they’re the <em>best way</em> to do so; until we think that GMOf will work much better than methods based on organic agriculture, for example, we don’t have enough reason to develop GMOf (and not develop organics). (2) and (3) don’t provide enough support for (4).</p>
<p>Lacey’s critique grants premise (3), at least for the sake of argument. My work is more critical of premise (3) itself. It’s not that I think (3) is <em>false</em>. Rather, I think the ability of GMOf to increase food production depends a great deal on <em>how</em> the technology is developed, and that the way this research is funded tends to produce GMOf that don’t significantly increase food production. The “feed the world” argument holds up the promise of GMOf, but I suspect that this promise won’t be realized if we continue on our present course.</p>
<p>Next, agnotology. The term was coinced by Stanford historian of science Robert Proctor a few years ago, to mean “the study of ignorance.” Proctor thinks that we science scholars shouldn’t just be looking at the way knowledge is produced, and we shouldn’t just assume that ignorance is not (yet) having knowledge. Based on <a href="http://books.google.com/books?id=YP2dHzxkx5cC">his work on tobacco</a>, Proctor argues that ignorance is often <em>actively produced</em>, and in some cases is even produced as a “strategic ploy”. Think of the way tobacco industry executives and scientists publicly denied that nicotine was addictive or caused cancer for decades after they had strong evidence showing otherwise.</p>
<p>Work in agnotology would be especially valuable, I think, because it can be quite difficult to tell whether someone is producing knowledge or ignorance. Something that appears to be knowledge (like an article in a peer-reviewed journal, complete with numbers and citations) can actually be <strong>agnogenetic</strong>, creating ignorance. The agnogenetic strategy — the way of creating ignorance — that I’m looking at here works in this way. Specifically, scholarly citations might be being used to create a false appearance that the paper’s claims are trustworthy and well-supported.</p>
<p>I need to emphasize what precisely I’m arguing. My findings undercut the trustworthiness of the paper I examined, and so should make us question how well-supported its claims are. But I’m not going to provide evidence <em>against</em> any of its claims. Furthermore, I’m not claiming that the authors <em>deliberately</em> used this strategy to create ignorance. Indeed, I’m not even claiming that this paper <em>does in fact</em> create ignorance. My point is that <strong>the citations strategies used by the authors of this paper would be a very effective way to create ignorance</strong> if someone <em>were</em> trying to do so.</p>
<p>The paper — <a href="https://www.landesbioscience.com/journals/gmcrops/article/24176/">Brookes and Barfoot, “The Global Income and Production Effects of Genetically Modified (GM) Crops 1996-2011, <em>GM Crops and Food</em> 4:1 (Jan/Feb/Mar 2013), 74-83</a> — gives evidence that GMOf has already increased the production of maize (corn), i.e., in support of premise (3), as part of an argument that GMOf has produced economic benefits for farmers. Brookes and Barfoot are the founders and directors of <a href="http://www.pgeconomics.co.uk/">PG Economics Ltd.</a>, which describes itself as "a specialist provider of advisory and consultancy services to agriculture and other natural resource-based industries.” PG Economics Ltd.&nbsp;has been hired by such agricultural biotech companies as Monsanto and Dow Agro Sciences in the past, but the paper I was looking at is a report that they publish annually on the economic benefits of GM crops (both food and cotton) for farmers. Earlier versions of this report have been <a href="http://scholar.google.com/scholar?q=brookes+and+barfoot">cited hundreds of times by scholarly sources</a>, as well as by <a href="http://www.monsanto.com/newsviews/Pages/do-gm-crops-increase-yield.aspx">Monsanto</a> and other proponents of GMOf in non-scholarly contexts. (Note that, in this paper, Brookes and Barfoot claim no conflict of interest; this seems to be consistent with the letter of <a href="https://www.landesbioscience.com/journals/gmcrops/guidelines/#/guidelines">the journal’s conflict of interest policy</a>.)</p>
<p>The key evidence supporting premise (3) is given in Table 5, “Average (%) yield gains GM IR [insect-resistant] cotton and maize 1996-2011,” page 80. Brookes and Barfoot report modest improvements in core countries — 7.0% and 5.0% for maize in the US, for example — but really spectacular improvements in semiperiphery countries — 18.6% for maize in the Philippines, 21.0% in Colombia, for example. In addition, Brookes and Barfoot provide a list of several citations for each country in the far-right column of the table.</p>
<p>The numbers are impressive, and the list of citations creates the impression that they are the product of good scholarship. But they’re significantly larger than numbers I’ve seen elsewhere, which is why I decided to actually look up their citations. Specifically, I checked on the 12 citations dated 2003 or later for the four countries with increases greater than 10% for maize. Here’s what I found:</p>
<ul>
<li>South Africa
<ul>
<li>Citation number 31 was published by <a href="http://www.metapress.com/content/jd2pphettplpyg50/">a small peer-reviewed journal</a>; it combines surveys of a small (n=33) number of large farmers and mid-sized (n=368) number of small farmers. It reports “higher yields for both groups” of farmers, but I don’t have access to the actual text of the article through my university.</li>
<li>Citation number 32 was published by the <a href="http://repository.up.ac.za/handle/2263/3309?show=full">Journal of Development Perspectives</a>, a publication of the Economic Society of South Africa. Its conclusions don’t really support (3): “A survey of 135 farms in 2003/4 is used in a stochastic frontier model to show that Bt [insect-resistant] seed did not increase yields per kg of seed.”</li>
<li>Citation number 33 was published by <a href="http://www.agbioforum.org/v9n1/v9n1a02-gouse.htm">AgBioForum</a>, which is a small but recognized journal on agricultural biotechnology. It discussed a series of mid- to small-size surveys of farmers conducted between 2001/02 and 2003/04; GM maize was comparable or more productive than conventional maize.</li>
<li>Citation number 34 is said to be published by the “South African Maize Trust,” which doesn’t appear to have any record of the report on its website.</li>
<li>Citation number 37 is to the 2002 edition of an annual publication by <a href="http://en.wikipedia.org/wiki/Isaaa">ISAAA</a>, a pro-biotech organization.</li>
</ul></li>
<li>Philippines
<ul>
<li>Citation number 44 is listed online — as an image — but not accessible: <a href="http://www.strivefoundation.com/publications.html" class="uri">http://www.strivefoundation.com/publications.html</a>. From the website, it’s hard to tell what exactly the publishing organization <em>does</em>.</li>
<li>Citation number 45 is a conference presentation — the data don’t seem to be available online.</li>
<li>Citation number 46 is by a pro-biotech organization and doesn’t appear to be available online.</li>
</ul></li>
<li>Colombia
<ul>
<li>Citation number 18 was <a href="https://www.landesbioscience.com/journals/gmcrops/article/17591/?nocache=251815219">published in <em>GM Crops and Food</em></a> (the same journal as the Brookes and Barfoot paper) and is a small study (20 farms, 10 conventional and 10 GM).</li>
<li>Citation number 55 is another conference presentation.</li>
</ul></li>
<li>Brazil
<ul>
<li>Citation numbers 10, 58, and 59 are publications by a Brazilian research firm — like PG Economics Ltd., its data have been used by Monsanto — and none of these particular papers seem to be available online.</li>
<li>Citation number 60 is by Monsanto Brazil.</li>
</ul></li>
</ul>
<p>All together, Brookes and Barfoot provide some modest to weak evidence that GM maize was significantly more productive in South Africa, and some weak evidence that it was significantly more productive in Colombia. But many of their citations are inaccessible or have industry affiliations, making them untrustworthy. Furthermore, Brookes and Barfoot provide no real explanation of how they decided to use these particular studies. Their methodology section claims that “The report is based on extensive analysis of existing farm level impact data for GM crops, much of which can be found in peer reviewed literature.” (78) But only 4 of the 12 citations that I tracked down above were peer-reviewed, and it seems odd to say that the analysis is “extensive” when it looks at only a couple dozen of the thousands of GM productivity studies.</p>
<p>Again, none of this means that Brookes and Barfoot’s numbers are false or aren’t actually well-supported. My point is that this paper isn’t very trustworthy: we can’t check many of their numbers, and many of the ones that we can check come from sources we might not trust. And yet it <em>appears</em> trustworthy — the list of citations is right there next to the numbers in the table. Recognizing that the paper isn’t very trustworthy — recognizing the kinds of citations that the authors cited, whether they’re available, and so on — requires a very tedious exercise in tracking down citations.</p>
<p>These two features together — the appearance of trustworthiness and the difficulty of dismantling that appearance — make this kind of use of citations a powerful agnogenetic strategy. A typical non-scientist reader of the paper probably wouldn’t go to the trouble of looking carefully at the citations. A scientist might look more carefully; but, especially if they just need a quick citation for the literature review section of their own paper, instead they might assume that untrustworthy sources would be caught in the peer-review process before publication. Yet this assumption may not be warranted: peer reviewers are busy faculty who aren’t paid for their work as reviewers, and checking citations is boring and time-consuming. So untrustworthy citations could easily slip past everyone.</p>
<div id="footer">
<p><span id="timestamp">September 4th, 2013 11:02am</span> <span class="tag">(philosophy of) science</span> <span class="tag">food</span> <span class="tag">gmo controversy</span></p>
</div>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-copyright"><h2 class="anchored quarto-appendix-heading">Copyright</h2><div class="quarto-appendix-contents"><div>Dan Hicks</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dhicks\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>