<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dan Hicks">
<meta name="dcterms.date" content="2014-03-14">

<title>Notes for an Ethics of Community Interventions – Dan Hicks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-cf3f2c26eef976f46b51aa29f3e196e4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Notes for an Ethics of Community Interventions – Dan Hicks">
<meta property="og:description" content="Website description">
<meta property="og:site_name" content="Dan Hicks ">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Dan Hicks</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Teaching</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-teaching">    
        <li>
    <a class="dropdown-item" href="https://fairy-shrimp.netlify.app/">
 <span class="dropdown-text">Science, Technology, and Ethics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://fairy-shrimp-cr.netlify.app/">
 <span class="dropdown-text">Notes for Critical Reasoning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://data-science-methods.github.io/">
 <span class="dropdown-text">Methods of Data Science</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0001-7945-4416"> 
<span class="menu-text"><i class="fa-brands fa-orcid" aria-label="orcid"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com/citations?user=XvkwYZsAAAAJ&amp;hl=en"> 
<span class="menu-text"><i class="ai  ai-google-scholar" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://dhicks.github.io/cv"> 
<span class="menu-text"><i class="ai  ai-cv" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dhicks/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:dhicks4@ucmerced.edu"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Notes for an Ethics of Community Interventions</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">local</div>
                <div class="quarto-category">punishment</div>
                <div class="quarto-category">rights</div>
                <div class="quarto-category">students</div>
                <div class="quarto-category">wrongdoer</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Dan Hicks </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 14, 2014</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Last week, in response to the <a href="http://www.chicagotribune.com/news/local/suburbs/evanston_skokie_morton_grove/chi-northwestern-professor-not-to-teach-rest-of-quarter-20140305,0,5859112.story">Ludlow affair</a> — the most recent in a string of high-profile cases of sexual harassment/assault in academic philosophy — students at Northwestern planned a walk-out of his class. Brian Leiter, a philosopher at the University of Chicago who runs a highly-read blog on academic philosophy, called this action <a href="http://leiterreports.typepad.com/blog/2014/03/vigilante-justice-triumphs-at-northwestern.html">“vigilante justice”</a> and told an anonymous grad student who defended the action that s/he is <a href="http://feministphilosophers.wordpress.com/2014/03/06/on-ludlow-northwestern-and-the-ethics-of-teaching/#comment-95591">“a danger to a university community, to the rule of law, and to the freedom of thought.”</a> He also leveled similarly strong words against Rachel McKinnon, who publicly defended both the action of the Northwestern students and the anonymous grad student. Facebook, Twitter, and various philosophy blogs all erupted with heated “discussion” (that’s a euphemism) of Leiter’s comments and the situation as a whole. Terms like <a href="http://feministphilosophers.wordpress.com/2014/03/10/philosophys-moral-panic/">“lynch mob,” “witch hunt,” and “reign of terror”</a> were used.</p>
<p>Late in January, the progressive magazine <em>The Nation</em> published <a href="http://www.thenation.com/article/178140/feminisms-toxic-twitter-wars">“Feminism’s Toxic Twitter Wars,”</a> which aired concerns about a culture of “perpetual outrage and hair-trigger offense” in online feminism. It discussed, as a major example, the controversy over the <a href="http://bcrw.barnard.edu/publications/femfuture-online-revolution/">#Femfuture</a> report and the <a href="http://jezebel.com/our-favorite-solidarityisforwhitewomen-tweets-1125272401">#SolidarityIsForWhiteWomen</a> <a href="https://twitter.com/search?q=%23solidarityisforwhitewomen&amp;src=typd&amp;f=realtime">hashtag</a>. The piece itself prompted <a href="http://www.npr.org/blogs/codeswitch/2014/02/06/272455489/mean-girls-online-can-we-draw-a-line-in-social-media">a heated “discussion”</a> (again, a euphemism) about whether or not online feminism really is “toxic” and self-destructive or whether this is just the way in which privileged professional white feminists perceive a community in which impoverished and working-class women of color enjoy significant clout.</p>
<p>For many, many reasons, I cannot act as a referee in either of these controversies. What I am interested in here is the general social practice of mass criticism — “calling out,” shaming, ostracizing, or ridiculing a (perceived) wrongdoer — especially when it takes place outside of established formal institutions and uses emerging media (blogs, Twitter). One of the issues raised by the two controversies is whether this practice is ethical. Calling the practice “vigilante justice” or “toxic” implies that it is not. But it seems clear to me that in some cases it can be — civil rights marches, union picket lines, and petition campaigns are the same kind of practice, just done without early twenty-first century media.</p>
<p>First we need a neutral term to name this kind of practice. Rachel McKinnon suggested “community intervention,” and I think that’s about right. It seems to cover everything from petition campaigns to civil rights marches to publicly shaming a wrongdoer online. It also does not imply that all instances of this practice are ethical or unethical. My question, then, is: What are the conditions for an ethical community intervention?</p>
<p>More precisely: I assume we have some wrongdoer (an individual or collective agent). I assume that the wrongdoer has, in fact, done something harmful, bad, wrong, or vicious, at least by the standards of the community. The wrongdoer might be a member of the community (at least, before the intervention), or might be an outsider. The community is relatively un-organized, though I assume it has a few individual members who have significant <em>de facto</em> influence over some significant parts of the community; I call these individuals <em>community leaders</em>. The intervention might involve denunciations, criticism, shaming, petitions, protests, and so on. Taken together, are these actions ethical, that is, are they helpful or harmful, good or bad, right or wrong, virtuous or vicious?</p>
<p>I don’t think previous attempts to think about this question have been successful, in large part because of the language that’s been used. “Vigilante justice” and “mob mental” prejudice things from the start. Very general concepts like “academic freedom,” “due process,” and “freedom of speech” seem to me to be too general to be useful. Some specific concepts that are brought in, like “bullying,” have vague or subjective criteria of application (it’s not clear exactly when someone’s a bully), and so might be used prejudicially.</p>
<p>I think we need to start with an account of what kind of action the intervention is. It seems to be a collective action — one individual cannot carry out a community intervention. It also seems to be goal-oriented, that is, it has some aims or purposes. I suggest that one aim of many community interventions is to punish the wrongdoer. I don’t assume that all community interventions have this aim, or even that every individual involved in a given community intervention would think of it as having this aim. The aim might be direct punishment — the community intervention, itself, punishes the wrongdoer — or it might be indirect punishment — the community intervention gets institutional authorities to punish the wrongdoer.</p>
<p>Again, I’m going to assume that the wrongdoer did indeed do the deed in action, that this action was wrong, and that everyone recognizes both of these things. Those assumptions might be false in a particular case. Indeed, in both of the examples above, it’s controversial who the wrongdoers are. So we shouldn’t pass these issues by too lightly when we actually use this framework.</p>
<p>Political philosophers have developed several different theories of punishment, which support several different ways of thinking about whether punishment is being carried out ethically. <a href="http://www.jstor.org/discover/10.2307/3810992?uid=2&amp;uid=4&amp;sid=21103725474373">Christopher Wellman</a> gives us a nice overview of several prominent theories: The purpose of punishment is, variously,</p>
<ol type="1">
<li><strong>retribution</strong>: Justice requires that people get what they deserve, and wrongdoers deserve punishment.</li>
<li><strong>utilitarian</strong>: Punishment brings about the best consequences for the greatest number of people, e.g., through deterrence.</li>
<li><strong>security</strong>: The purpose of punishment is to maintain the security and stability of the social system.</li>
<li><strong>moral education</strong>: “The purpose of punishment is to morally educate offenders so that they (and others) will know better than to behave criminally.”</li>
<li><strong>symbolic</strong>: “Punishment is a conventional device for the expression of attitudes of resentment and indignation, and of judgments of disapproval and reprobation.”</li>
<li><strong>restitution</strong>: To correct the harm that the victim has suffered, either directly (returning stolen property to them) or indirectly (compensating them financially) or symbolically (“publicly confirming that the victim has a moral standing that the criminal was wrong to disrespect”).</li>
<li><strong>safety-valve</strong>: Punishment is “a safe, institutionally controlled release of destructive animosity and violent ill will.”</li>
</ol>
<p>These theories are usually taken to be rivals. For example, someone will defend the utilitarian theory and criticize the symbolic theory. But I want to understand them as complementary. Each theory discusses one aspect of punishment, one thing that many punishments (and institutionalized systems of punishment) are trying to do. Punishments do not necessarily have to try to do all of these (that would probably be inconsistent). Instead, a given act of punishment will be trying to do some of them. By identifying which ones, we can clarify the purposes of the punishment, and then ask whether we’re pursuing those purposes and indeed whether we should be pursuing them at all in this a particular case.</p>
<p>All together, here’s the idea: Taking a community intervention as a punishment, we start by asking what kind of punishment it’s supposed to be. Is it meant to get retribution against the wrongdoer? Maybe provide moral education for the community, or perhaps even the broader population? With this purpose in mind, we can use the issues and questions that I’ve listed below to consider whether the community intervention is ethical and, if not, how the community leaders might steer the community back on track.</p>
<ol type="1">
<li><p><strong>retribution</strong>: Is the punishment proportionate to desert, that is, no less, but also no more, than the wrongdoer deserves? Is the punishment specific to the wrongdoer’s actions? For example, is it focused on the specific vices that the offender exhibited?</p></li>
<li><p><strong>utilitarian</strong>: How reliably can we make predictions about the consequences of the punishment? What consequences do we predict? Are they the best possible consequences?</p></li>
<li><p><strong>security</strong>: This aim assumes that the social system should be secure and stable. Often community interventions are responses to particular injustices that are symptoms of broader, structural injustices. So, structurally speaking, are there tensions between security and stability? Whose security has been violated by the offense? Whose security, if anyone’s, will be violated by the punishment? In what ways?</p></li>
<li><p><strong>moral education</strong>: What, exactly, is the behavior we’re trying to educate people about? How will this education work? Can we make reasonable predictions about whether it will succeed?</p></li>
<li><p><strong>symbolic</strong>: I take it that many community interventions are aiming at this. What, exactly, is the attitude or judgment to be expressed? Will the members of the community be satisfied by merely expressing attitudes and judgments? What will the wrongdoer and other members of the community do with those expressions?</p></li>
<li><p><strong>restitution</strong>: Who, exactly, has been wronged, and how? How will the community intervention restore the victim? What does the victim think of these efforts?</p></li>
<li><p><strong>safety-valve</strong>: Community interventions, by their nature, have limited institutional self-control. What institutional controls, if any, are in place? What, if anything, is there to prevent individuals from, for example, physically attacking the wrongdoer? How will community leaders respond if this kind of thing happens?</p></li>
</ol>
<p>I want to stress, again, that I’m not claiming that any of the community interventions discussed at the top of the post are either unethical or ethical. So I’m not offering answers to any of these questions about those particular interventions. I also don’t claim that the questions I’ve listed are all of the questions that should be asked. And notice that I haven’t told you what the “right” and “wrong” answers will be to these questions.</p>
<p>In short, these notes are not determinate judgments or a fixed set of principles, but rather a place to start deliberation.</p>
<p>Are there other aims for community interventions that I’ve overlooked? Other questions that we should ask relevant to the ones I’ve listed? What do you think?</p>
<div id="footer">
<p><span id="timestamp">March 14th, 2014 10:01am</span> <span class="tag">ethics</span> <span class="tag">metaphilosophy</span></p>
</div>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-copyright"><h2 class="anchored quarto-appendix-heading">Copyright</h2><div class="quarto-appendix-contents"><div>Dan Hicks</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/dhicks\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>