{
  "hash": "e292eaf8c09eb8f4b93637e9f7e0255b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"When might there be a diversity-merit tradeoff?\"\ndate: 2025-07-12\ntoc: true\n---\n\nThis morning I was reading [this paper](https://www.tandfonline.com/doi/full/10.1080/08989621.2024.2423358) (sorry I'm too lazy to set up a bibliography file on top of the simulation), which quotes a researcher raising a familiar argument against diversity efforts: \n\n> We start employing people based on any criteria other than competency, well, then, of course we’re going to get a ... A ... A poorer outcome. Competency should be ... Ability should be the sole criterion. \n\nTo adjust the terminology slightly, according to this argument there's a tradeoff between diversity and merit, such that if we take contributions to diversity into account (in hiring, research awards, tenure, etc.) the result will be an overall loss of \"merit\" or \"quality\". \n\nAs the scare quotes suggest, there are some fundamental conceptual problem with this argument. No one knows what the hell \"merit\" is, much less how to accurately measure it when making decisions about hiring, etc.; and at best it can mean a wide variety of things, and indeed among these things might be contributions to diversity. \n\nBut in this post I want to consider instead the tradeoff assumption itself. If we grant to the conservative^[For convenience, in this post I'm going to use this label for the position that's opposed to taking contributions to diversity into account in hiring, etc. I don't want to use \"anti-DEI\" because to me that refers to a movement that's much more angry and often more openly racist than what we see in the quotation.] that there is such a thing as \"merit,\" that it can be accurately measured, it has a unidimensional structure, and that maximizing it is among the most important goals of hiring, it still doesn't necessarily follow that giving increased weight to diversity (also assumed to be accurately measurable and unidimensional) will significantly reduce merit. Under some circumstances it might do so; but if, say, merit and diversity are correlated, it might not make much of a difference. \n\nSo my question here is not *whether* there's a diversity-merit tradeoff, but *under what conditions* there's a tradeoff. \n\n# Defining the simulation\n\nTo investigate question of the conditions for a diversity-merit tradeoff, we'll set up a very simple simulation of a hiring scenario. We'll need the following packages: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ntheme_set(theme_bw())\nlibrary(purrr) ## >= 1.1 for parallel processing\nlibrary(mirai) ## for parallel processing\nmax_daemons = 10 ## be sure to adjust for your particular machine\n\nlibrary(MASS) ## multivariate Gaussian samples\n\n## utilities\nlibrary(tictoc)\nlibrary(assertthat)\n```\n:::\n\n\nWe start with a pool of potential researchers, each of whom has a merit score and a (contributions to) diversity score. For simplicity, each score will follow a Gaussian (normal) distribution with mean 0 and standard deviation 1. But merit and diversity might be correlated, so we'll use a multivariate Gaussian, with the correlation coefficient $\\rho$/`rho` as one parameter that can be adjusted in the simulation. This will range from 1 (perfect correlation between diversity and merit: the meritorious are also the \"most diversity\") to -1 (perfect *anti*correlation between diversity and merit: the meritorious are the \"least diverse\"). In `simulate` below, this step is accomplished by the nested function `draw_pool`. \n\nTo hire out of the pool, we next calculate a score for each individual in the pool, a weighted sum of merit and diversity: \n\n$$ \\textrm{score}_\\alpha = \\alpha \\times \\textrm{diversity} + (1 - |\\alpha|) \\times \\textrm{merit} $$\nWe'll consider weights ranging from 1 (only considering diversity) to 0 (only considering merit) and down to -1 (which amounts to discriminating against diversity, without any consideration for merit).^[In the coefficient on merit, we use the absolute value of $\\alpha$ to ensure symmetry between positive and negative values.] This step is done using `score_pool` below. \n\nThe top individuals, by score, will be hired. We'll consider three different hiring scenarios, where the top 10%, 25%, and 50% are hired. You can think of this as \"selectivity,\" but I'm thinking of it as \"austerity.\" While we expect average merit to be greater under greater selectivity, it also means there are many fewer researchers hired, and consequently probably much less research \"productivity.\" \n\nWe'll look at two outputs from this simulation: mean merit, and \"productivity.\" We'll operationalize the latter as the sum of merit across the hired researchers. \n\nThese final steps — hiring the top researchers from the pool and calculating their mean merit and productivity — are done by the `hire` function. \n\nA single iteration of the simulation is handled by the following function: \n\n::: {.cell}\n\n```{.r .cell-code}\n## n: number of researchers in the pool\n## hiring: a vector of the fraction of researchers to hire\nsimulate = function(rho, diversity_weight, hiring, n = 50) {\n    draw_pool = function(rho, n = 50) {\n        Sigma = diag(2) * (1 - rho) + rho\n        sample = MASS::mvrnorm(n, mu = c(0, 0), Sigma = Sigma)\n        colnames(sample) = c('merit', 'diversity')\n        return(sample)\n    }\n    \n    score_pool = function(pool, alpha) {\n        score = alpha * pool[,'diversity'] + (1 - abs(alpha)) * pool[,'merit']\n        pool = cbind(pool, score)\n        return(pool)\n    }\n    \n    hire = function(hiring, pool) {\n        library(magrittr)\n        pool[,'score'] |> \n            order(decreasing = TRUE) %>%\n            {head(., hiring * length(.))} %>%\n            {pool[.,]} %>% \n            {.[,'merit']} %>% \n            {list(merit = mean(.), prod = sum(.))}\n    }\n    \n    pool = rho |> \n        draw_pool(n) |> \n        score_pool(diversity_weight)\n    \n    tibble::tibble(rho, \n                   diversity_weight,\n                   hiring) |> \n        dplyr::bind_cols(purrr::map_dfr(hiring, ~ hire(.x, pool)))\n}\n```\n:::\n\n\n(To take advantage of [`purrr`'s new parallelization feature](https://www.tidyverse.org/blog/2025/07/purrr-1-1-0-parallel/), we need to nest the functions for each step inside `simulate`, and reference package functions using `::` syntax.)\n\nWe'll wrap this in another function, `simulations`, which iterates the simulation in parallel. \n\n::: {.cell}\n\n```{.r .cell-code}\nsimulations = function(N, rho, diversity_weight, hiring, n = 50) {\n    map_dfr(1:N, \n            in_parallel(\\(N) \n                        simulate(rho, diversity_weight, hiring, n), \n                        simulate = simulate, \n                        rho = rho, \n                        diversity_weight = diversity_weight, \n                        hiring = hiring, \n                        n = n), \n            .id = 'iter')\n}\n```\n:::\n\n\n# Simulation parameters\n\nThe simulation parameters are defined below. We'll use a parameter grid for `rho` and `diversity_weight`; it's more efficient to handle `hiring` separately. While we're here, we'll also calculate the expected length of the output dataframe, and use this in an assertion below. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nrho = seq(-1, 1, by = .2)\ndiversity_weight = seq(-1, 1, by = .2)\nhiring = c(.1, .25, .5)\nn = 500 ## size of the hiring pool\nN = 100 ## num. simulation runs at each parameter combo\n\nparams = expand_grid(rho, \n                     diversity_weight)\n\n## Expected number of rows in output\nexpect_rows = (length(rho) * length(diversity_weight) * \n                   length(hiring) * N) |> \n    as.integer()\n\nmessage('Expected number of output rows: ', expect_rows)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nExpected number of output rows: 36300\n```\n\n\n:::\n:::\n\n\n# Run the simulation\n\nIn the development script, I nested these lines of code in braces so that I could run them all without highlighting. (This takes several seconds on my machine, so I'm caching it. Wall times might be different as a result of caching.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n{\n    set.seed(20250714)\n    daemons(max_daemons)\n    tic()\n    dataf = params |> \n        pmap(~ simulations(N, ..1, ..2, hiring, n)) |> \n        bind_rows()\n    assert_that(identical(nrow(dataf), expect_rows))\n    toc()\n    daemons(0)\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n5.624 sec elapsed\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0\n```\n\n\n:::\n:::\n\n\nAlongside the output for each iteration, it's useful to have just the mean within each combination of parameter values. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataf_sum = dataf |> \n    group_by(rho, diversity_weight, hiring) |> \n    summarize(N = n(), \n              across(c(merit, prod),\n                     lst(mean, sd))) |> \n    ungroup() |> \n    mutate(merit_se = merit_sd / sqrt(N), \n           prod_se = prod_sd / sqrt(N))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'rho', 'diversity_weight'. You can override\nusing the `.groups` argument.\n```\n\n\n:::\n:::\n\n\n# Analysis\n\n## Merit\n\nThis tile plot shows the average merit (`merit_mean`) for each combination of `rho` (diversity-merit tradeoff), weight $\\alpha$ given to diversity (`diversity_weight`), and hiring scenario (the panels). \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerit_tile = ggplot(dataf_sum, \n       aes(diversity_weight, rho)) +\n    geom_raster(aes(fill = merit_mean)) +\n    scale_fill_gradient2(low = 'red', \n                         mid = 'white', \n                         high = 'blue', \n                         midpoint = 0) +\n    facet_wrap(vars(hiring)) +\n    coord_equal()\nmerit_tile\n```\n\n::: {.cell-output-display}\n![](2025-07-12-diversity-merit_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nFirst, high austerity tends to heighten the effects of diversity weighting (or not): the difference between the maximum and minimum values of mean merit is greatest when only the top 10% are hired, and smallest when the top 50% are hired. Second, within a hiring level, mean merit appears to be maximized when diversity is given zero weight. Third, the effect of weighting diversity depends on $\\rho$, the correlation between merit and diversity. When $\\rho > 0$, then positively weighting diversity doesn't appear to diminish mean merit very much; while discrimination decreases it sharply. \n\nLet's plot \"transects,\" mean merit against diversity for moderate values $-0.4 \\leq \\rho \\leq 0.4$. We'll go ahead and include every iteration, and GAM curves across values of $\\rho$. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataf |> \n    filter(-0.41 < rho, rho < 0.41) |>\n    ggplot(aes(diversity_weight, merit, \n               color = rho)) +\n    geom_vline(xintercept = 0, color = 'grey65') +\n    geom_point(position = 'jitter', alpha = .05) +\n    geom_smooth(aes(group = rho), \n                color = 'black', linewidth = 1.2) +\n    geom_smooth(aes(color = rho, group = rho), \n                linewidth = 1) +\n    scale_color_viridis_c(option = 'C') +\n    facet_wrap(vars(hiring))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](2025-07-12-diversity-merit_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThese confirm that more extreme weightings of diversity do indeed have less dramatic effects when they're aligned with $\\rho$. There's also a  \"plateau,\" roughly independent of $\\rho$ and for $-0.25 < \\alpha < 0.25$. Giving some weight to diversity, but placing more weight on merit, has negligible effects on mean merit. \n\nIt also looks like, for $\\rho = 0.4$, mean merit might not be maximized right at $\\alpha = 0$. Let's zoom in on this area, and let each panel have its own y-axis scale. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataf |> \n    filter(0.39 < rho, rho < 0.41, \n           -.41 < diversity_weight, diversity_weight < .41) |>\n    ggplot(aes(diversity_weight, merit, \n               color = rho)) +\n    geom_vline(xintercept = 0, color = 'grey65') +\n    geom_point(position = 'jitter', alpha = .05) +\n    geom_smooth(aes(group = rho), \n                color = 'black', linewidth = 1.2) +\n    geom_smooth(aes(color = rho, group = rho), \n                linewidth = 1) +\n    # scale_color_viridis_c(option = 'C') +\n    facet_wrap(vars(hiring), scales = 'free')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](2025-07-12-diversity-merit_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\nNo, that suggestion appears to be incorrect. The curve is all but completely flat around $\\alpha = 0$. \n\n\n## Productivity\n\nWe'll adapt the visualizations for mean merit to productivity. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dataf_sum, \n       aes(diversity_weight, rho)) +\n    geom_raster(aes(fill = prod_mean)) +\n    scale_fill_gradient2(low = 'red', \n                         mid = 'white', \n                         high = 'blue', \n                         midpoint = 0) +\n    facet_wrap(vars(hiring)) +\n    coord_equal()\n```\n\n::: {.cell-output-display}\n![](2025-07-12-diversity-merit_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nProductivity is much, much greater under less austere hiring; and the effects of weighting diversity or discrimination are more dramatic. \n\nHere's the \"transect\" plot: \n\n::: {.cell}\n\n```{.r .cell-code}\ndataf |> \n    filter(-0.41 < rho, rho < 0.41) |>\n    ggplot(aes(diversity_weight, prod, \n               color = rho)) +\n    geom_point(position = 'jitter', alpha = .05) +\n    geom_smooth(aes(group = rho), \n                color = 'black', linewidth = 1.2) +\n    geom_smooth(aes(color = rho, group = rho), \n                linewidth = 1) +\n    scale_color_viridis_c(option = 'C') +\n    facet_wrap(vars(hiring))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](2025-07-12-diversity-merit_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n# Mapping parameters to political imaginaries\n\nFor reference, here's the mean merit tile plot again. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerit_tile +\n    annotate('segment', x = 0, xend = .75, y = -.4, yend = -.4, \n             arrow = arrow(length = unit(.1, 'inches'))) +\n    annotate('text', x = -0.1, y = -.4, label = 'A') +\n    annotate('segment', x = -.5, xend = 0.25, y = .4, yend = .4, \n             arrow = arrow(length = unit(.1, 'inches'))) +\n    annotate('text', x = -.6, y = .4, label = 'B')\n```\n\n::: {.cell-output-display}\n![](2025-07-12-diversity-merit_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nThe conservative argument — that there's a tradeoff between diversity and merit — is strongest when\n\n- the status quo is perfectly meritocratic ($\\alpha = 0$)\n- diversity and merit are strongly anticorrelated ($\\rho \\ll 0$)\n- the proposal involves treating diversity as about as important as merit, if not more so ($\\alpha \\gg 0.25$). \n\nI've added a moderate version of these conditions as arrow A on the figure. This does correspond to a notable drop in mean merit, especially under austere hiring (or when we're only considering the \"top researchers\"). \n\nThe contrasting \"DEI argument\" is strongest when\n\n- the status quo is discriminatory ($\\alpha < 0$)\n- diversity and merit are strongly correlated ($\\rho \\gg 0$)\n- the proposal involves giving diversity some positive weight, but still placing more weight on merit ($0 < \\alpha < 0.25$).\n\nThis corresponds to something like arrow B. Under these conditions, mean merit actually increases, as \"diverse\" researchers are no longer discriminated against. \n\nIt's striking to me how well this oversimplified model brings out the way our society talks about diversity. The conservative view — generally dominant over the last half century or so — assumes that we've already achieved a color-blind ideal, that diverse scholars are eo ipso worse researchers, that the proposal is to all but completely ignore any considerations of merit, and that we're primarily interested in the \"top researchers\" or operating under such severe austerity that very few candidates will make the cut. While the contrasting view assumes that discrimination still exists, that \"more diverse\" researchers are better researchers (perhaps because diversity is considered *part* of merit), and modestly proposes to give diversity some weight while still emphasizing merit. \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}